//+--------------------------------------------------------------------------------------+//|  ATtiny2313 Quad Motor Control Board V1.0  Motor Control Functions                   |//+--------------------------------------------------------------------------------------+//| Functions to control Motors Connected to Terminals P5,P4,P7and P6 of ATtiny2313 Quad-|  //|-Motor Control Board V1.0 .                                                           |//+--------------------------------------------------------------------------------------+//|Circuit Connections                                                                   |//|                                                                                      |//|      ATtiny2313        L293D [U4]                                                    |//|    +------------+     +----------+                                                   |//|    |         PD2|---->|1A      1Y|-----+==+                                          |//|    |         PD6|---->|2A        |     |P4|(Motor1)                                  |//|    |         PB2|---->|EN1     2Y|-----+==+                                          |//|    |            |     |          |                                                   |//|    |         PB0|---->| 3A     3Y|-----+==+                                          |//|    |         PB1|---->| 4A       |     |P5|(Motor2)                                  |//|    |         PD5|---->| EN2    4Y|-----+==+                                          |//|    |            |     +----------+                                                   |//|    |            |      L293D [U5]                                                    |//|    |            |     +----------+                                                   |//|    |         PB5|---->|1A      1Y|-----+==+                                          |//|    |         PB6|---->|2A        |     |P6|(Motor3)                                  |//|    |         PB3|---->|EN1     2Y|-----+==+                                          |//|    |            |     |          |                                                   |//|    |         PA0|---->|3A      3Y|-----+==+                                          |//|    |         PA1|---->|4A        |     |P7|(Motor4)                                  |//|    |         PB4|---->|EN2     4Y|-----+==+                                          |//|    +------------+     +----------+                                                   |//|                                                                                      |//+--------------------------------------------------------------------------------------+//| Compiler           : AVR GCC (WinAVR)                                                |//| Microcontroller    : ATtiny2313                                                      |//| Programmer         : Rahul.Sreedharan                                                |//| Date               : 21-May-2016                                                     |//+--------------------------------------------------------------------------------------+//(C) www.xanthium.in // Visit to Learn More #include <stdint.h>#include <avr/io.h>#include "motor.h"//+-------------------------------------------------------------------------------------+//|  Function to Control the Motor Connected to P4 of  ATtiny Quad Motor Control Board   |//+-------------------------------------------------------------------------------------+void Motor_Control_P4(char Operation){	//Motor Connector P4	//PD2 -> 1A  [U4]	//PD6 -> 2A  [U4]	//PB2 -> EN1 [U4]		DDRD |= (1<<PD2) | (1<<PD6); // PD2 and PD6 output	DDRB |= (1<<PB2);            // PB2 output		switch (Operation)	{		case ON: 	PORTD |=  (1<<PD2); // PD2 -> 1A = High					PORTD &= ~(1<<PD6); // PD6 -> 2A = Low					PORTB |=  (1<<PB2); // PB2 -> EN1 = High; Start the motor 					break;						    case OFF:	PORTB &= ~(1<<PB2); // PB2 -> EN1 = Low; Stop the motor 					break;							case REVERSE:					PORTD &= ~(1<<PD2); // PD2 -> 1A = Low					PORTD |=  (1<<PD6); // PD6 -> 2A = High					PORTB |=  (1<<PB2); // PB2 -> EN1 = High; Start the motor 					break;							default:	PORTB &= ~(1<<PB2); // PB2 -> EN1 = Low; Stop the motor 					break;	}}//+-------------------------------------------------------------------------------------+//|  Function to Control the Motor Connected to P5 of  ATtiny Quad Motor Control Board   |//+-------------------------------------------------------------------------------------+void Motor_Control_P5(char Operation){	//Motor Connector P5	//PB0 -> 3A  [U4]	//PB1 -> 4A  [U4]	//PD5 -> EN2 [U4]		DDRB |= (1<<PB0) | (1<<PB1); // PB0 and PB1 output	DDRD |= (1<<PD5);            // PD5 output		switch (Operation)	{		case ON: 	PORTB |=  (1<<PB0); // PB0 -> 3A = High					PORTB &= ~(1<<PB1); // PB1 -> 4A = Low					PORTD |=  (1<<PD5); // PD5 -> EN2 = High; Start the motor 					break;						    case OFF:	PORTD &=  ~(1<<PD5); // PD5 -> EN2 = Low; Stop the motor 					break;							case REVERSE:					PORTB &=  ~(1<<PB0); // PB0 -> 3A = Low					PORTB |=   (1<<PB1); // PB1 -> 4A = High					PORTD |=   (1<<PD5); // PD5 -> EN2 = High; Start the motor 					break;							default:	PORTD &=  ~(1<<PD5); // PD5 -> EN2 = Low; Stop the motor  					break;	}}//+-------------------------------------------------------------------------------------+//|  Function to Control the Motor Connected to P6 of  ATtiny Quad Motor Control Board  |//+-------------------------------------------------------------------------------------+void Motor_Control_P6(char Operation){	//Motor Connector P6	//PB5 -> 1A  [U5]	//PB6 -> 2A  [U5]	//PB3 -> EN1 [U5]		DDRB |= (1<<PB5) | (1<<PB6) |(1<<PB3); // PB5,PB6 and PB3 output			switch (Operation)	{		case ON: 	PORTB |=  (1<<PB5); // PB5 -> 1A = High					PORTB &= ~(1<<PB6); // PB6 -> 2A = Low					PORTB |=  (1<<PB3); // PB3 -> EN1 = High; Start the motor 					break;						    case OFF:	PORTB &=  ~(1<<PB3); // PB3 -> EN1 = Low; Stop the motor 					break;							case REVERSE:					PORTB &= ~(1<<PB5); // PB5 -> 1A = Low					PORTB |=  (1<<PB6); // PB6 -> 2A = High					PORTB |=  (1<<PB3); // PB3 -> EN1 = High; Start the motor 					break;							default:	PORTB &=  ~(1<<PB3); // PB3 -> EN1 = Low; Stop the motor 					break;	}}//+-------------------------------------------------------------------------------------+//|  Function to Control the Motor Connected to P7 of  ATtiny Quad Motor Control Board  |//+-------------------------------------------------------------------------------------+void Motor_Control_P7(char Operation){	//Motor Connector P7	//PA0 -> 3A  [U5]	//PA1 -> 4A  [U5]	//PB4 -> EN2 [U5]		DDRA |= (1<<PA0) | (1<<PA1) |(1<<PB3); // PA0,PA1 output	DDRB |= (1<<PB4);                      // PB4 Output			switch (Operation)	{		case ON: 	PORTA |=  (1<<PA0); // PA0 -> 3A = High					PORTA &= ~(1<<PA1); // PA1 -> 4A = Low					PORTB |=  (1<<PB4); // PB4 -> EN2 = High; Start the motor 					break;						    case OFF:	PORTB &=  ~(1<<PB4); // PB4 -> EN2 = Low; Stop the motor 					break;							case REVERSE:					PORTA &=  ~(1<<PA0); // PA0 -> 3A = Low					PORTA |=   (1<<PA1); // PA1 -> 4A = High					PORTB |=   (1<<PB4);  // PB4 -> EN2 = High; Start the motor 					break;							default:	PORTB &=  ~(1<<PB4); // PB4 -> EN2 = Low; Stop the motor 					break;	}}